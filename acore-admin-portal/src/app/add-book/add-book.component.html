<app-navbar>
    <div class="component-container">
      <h1>Add Book</h1>

      <div class="addbook-container">
        <mat-card class="card-container">
          <mat-card-content>
            <form [formGroup]="bookForm" (ngSubmit)="onSubmit()">
              <div class="grid-container">
                <div class="first-half">
                  <div class="grid-item">
                    <div class="rounded-input">
                      <input
                        id="title"
                        type="text"
                        placeholder="Book title"
                        style="background-color: #eff1fd;"
                        formControlName="title"
                      />
                      <div
                        *ngIf="bookForm.get('title')?.invalid && bookForm.get('title')?.touched"
                        class="error-message"
                      >
                        Title is required.
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div class="rounded-input">
                      <input
                        id="author"
                        type="text"
                        placeholder="Book Author"
                        style="background-color: #eff1fd;"
                        formControlName="author"
                      />
                      <div
                        *ngIf="bookForm.get('author')?.invalid && bookForm.get('author')?.touched"
                        class="error-message"
                      >
                        Author is required.
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div class="rounded-input">
                      <select
                        id="category"
                        style="background-color: #eff1fd;"
                        formControlName="category"
                      >
                        <option value="" disabled selected>Categories</option>
                        <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
                      </select>
                      <div
                        *ngIf="bookForm.get('category')?.invalid && bookForm.get('category')?.touched"
                        class="error-message"
                      >
                        Category is required.
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div class="rounded-input">
                      <input
                        id="price"
                        type="number"
                        placeholder="Book Price"
                        style="background-color: #eff1fd;"
                        formControlName="price"
                      />
                      <div
                        *ngIf="bookForm.get('price')?.invalid && bookForm.get('price')?.touched"
                        class="error-message"
                      >
                        Price is required and should be a numeric value with up to 2 decimal places.
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div class="rounded-input">
                      <input
                        id="version"
                        type="text"
                        placeholder="Book Version"
                        style="background-color: #eff1fd;"
                        formControlName="version"
                      />
                      <div
                        *ngIf="bookForm.get('version')?.invalid && bookForm.get('version')?.touched"
                        class="error-message"
                      >
                        Version is required.
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div class="rounded-input">
                      <select
                        id="older"
                        style="background-color: #eff1fd;"
                        formControlName="olderVersion"
                      >
                        <option value="" disabled selected>Book Older Version</option>
                        <option *ngFor="let version of previousVersions" [value]="version">{{ version }}</option>
                      </select>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div class="rounded-input">
                      <input
                        id="edition"
                        type="text"
                        placeholder="Book Edition"
                        style="background-color: #eff1fd;"
                        formControlName="edition"
                      />
                    </div>
                  </div>
                  <div class="grid-item">
                    <div class="rounded-input">
                      <input
                        id="isbn"
                        type="text"
                        placeholder="Book ISBN"
                        style="background-color: #eff1fd;"
                        formControlName="isbn"
                      />
                      <div
                        *ngIf="bookForm.get('isbn')?.invalid && bookForm.get('isbn')?.touched"
                        class="error-message"
                      >
                        ISBN is required and should be in the format of XXX-X-XXXXXX-X.
                      </div>
                    </div>
                  </div>
                  <div class="grid-item">
                    <div class="rounded-input">
                      <input
                        id="date"
                        type="date"
                        placeholder="Book Release Date"
                        style="background-color: #eff1fd;"
                        formControlName="releaseDate"
                      />
                    </div>
                  </div>
                </div>
                <div class="second-half">
                    <div class="grid-item">
                        <div class="rounded-input">
                          <div class="upload-area">
                            <div class="upload-icon">
                              <img src="https://img.freepik.com/free-icon/cloud-computing_318-463117.jpg" alt="Upload Icon">
                            </div>
                            <div class="upload-text">Best dimensions for book cover image are 128x200</div>
                            <label class="upload-button">
                              <input id="cover" type="file" (change)="onFileSelected($event)">
                              <span *ngIf="bookForm.get('coverPhoto')?.value">{{ bookForm.get('coverPhoto')?.value }}</span>
                              <span *ngIf="!bookForm.get('coverPhoto')?.value">Upload Book Cover</span>
                            </label>
                          </div>
                          <div *ngIf="bookForm.get('coverPhoto')?.invalid && bookForm.get('coverPhoto')?.touched" class="error-message">
                            Cover photo is required.
                          </div>
                        </div>
                      </div>                                  
                  <div class="grid-item">
                    <div class="rounded-input">
                      <textarea
                        id="brief"
                        placeholder="Enter brief"
                        style="background-color: #eff1fd;"
                        formControlName="brief"
                      ></textarea>
                      <div
                        *ngIf="bookForm.get('brief')?.invalid && bookForm.get('brief')?.touched"
                        class="error-message"
                      >
                        Brief is required.
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </form>
          </mat-card-content>
          <mat-card-actions align="end">
            <div class="grid-container">
              <div class="grid-item">
                <button mat-raised-button color="primary" [disabled]="bookForm.invalid" (click)="saveBook()">Save</button>
            </div>
              <div class="grid-item">
                <button mat-raised-button color="warn" (click)="cancel()">Cancel</button>
              </div>
            </div>
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  </app-navbar>
  